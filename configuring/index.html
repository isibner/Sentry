<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="description" content="A flexible, simple continuous integration server for code quality.">
  <title>Configuring</title>
  <!-- Favicon stuff -->
  <link rel="apple-touch-icon" sizes="57x57" href="/sentry/favicons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/sentry/favicons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/sentry/favicons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/sentry/favicons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/sentry/favicons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/sentry/favicons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/sentry/favicons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/sentry/favicons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/sentry/favicons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/sentry/favicons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/sentry/favicons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/sentry/favicons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/sentry/favicons/favicon-16x16.png">
  <link rel="manifest" href="/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">

  <meta name="description" content="">
  <meta name="author" content="">

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <link href='http://fonts.googleapis.com/css?family=Raleway:400,300,600|Lato:300,400,900' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="/sentry/css/vendor/normalize.css">
  <link rel="stylesheet" href="/sentry/css/vendor/bootstrap.min.css">
  <link rel="stylesheet" href="/sentry/css/vendor/bootstrap-social.css">

  <!-- Theme CSS -->
  <link rel="stylesheet" href="/sentry/css/vendor/theme.css">

  <!-- HighlightJS CSS -->
  <link rel="stylesheet" type="text/css" href="/sentry/css/hljs-theme-github.css">

  <!-- base CSS -->
  <link rel="stylesheet" href="/sentry/css/base.css">

</head>
<body>
  <!-- Fixed navbar -->
  <nav class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <a class="navbar-brand" href="/sentry/"><b>// Sentry</b></a>
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
      </div>
      <div id="navbar" class="navbar-collapse collapse">
        <ul class="nav navbar-nav navbar-right">
          <li>
            <a href="/sentry/about">About</a>
          </li>
          <li>
            <a href="/sentry/quickstart">Quickstart</a>
          </li>
          <li>
            <a href="/sentry/configuring">Configuring</a>
          </li>
          <li>
            <a href="/sentry/plugins">Plugins</a>
          </li>
          <li class="dropdown">
              <a href="javascript:void(0)" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">API <span class="caret"></span></a>
              <ul class="dropdown-menu">
                <li><a href="/sentry/sources">Sources</a></li>
                <li><a href="/sentry/services">Services</a></li>
              </ul>
            </li>
        </ul>
      </div>
    </div>
  </nav>

  <div class="content">
  
<link rel="stylesheet" type="text/css" href="/sentry/css/markdown.css">

<div class="container markdown-container">
  <div class="row mt">
    <div class="col-md-10 col-md-offset-1">
      <h1 id="configuring-the-server">Configuring the server</h1>
<p>The Sentry server is designed to be easily configurable. The config file at <code>config/server.coffee</code> is used to define server variables, such as your database URI, while the file at <code>config/plugins.coffee</code> is used to register new sources and services.</p>
<p><code>config/plugins.coffee</code> is simple: the plugin packages are simply listed as strings and exported.</p>
<pre><code class="lang-coffeescript">sources = [<span class="hljs-string">'sentry-source-github'</span>]
services = [<span class="hljs-string">'sentry-service-cruft'</span>]

<span class="hljs-built_in">module</span>.exports = {sources, services}
</code></pre>
<p><code>config/server.coffee</code> is more complex, but the defaults are almost always what you want anyway.</p>
<pre><code class="lang-coffeescript">[path, url] = [<span class="hljs-string">'path'</span>, <span class="hljs-string">'url'</span>].map <span class="hljs-built_in">require</span>
root = path.join __dirname, <span class="hljs-string">'..'</span>
base = process.env.BASE_URL || <span class="hljs-string">'http://localhost:3000/'</span>

<span class="hljs-built_in">module</span>.exports =
  <span class="hljs-attribute">ROOT</span>: root
  <span class="hljs-attribute">APP_ROOT</span>: path.join(root, <span class="hljs-string">'app'</span>)
  <span class="hljs-attribute">CLONE_ROOT</span>: path.join(root, <span class="hljs-string">'.cloned_repos'</span>)
  <span class="hljs-attribute">COOKIE_SECRET</span>: process.env.COOKIE_SECRET || <span class="hljs-string">'12345'</span>
  <span class="hljs-attribute">BASE_URL</span>: base
  <span class="hljs-attribute">DASHBOARD_URL</span>: url.resolve(base, <span class="hljs-string">'/dashboard'</span>)
  <span class="hljs-attribute">MONGO_URI</span>: process.env.MONGOLAB_URI || <span class="hljs-string">'mongodb://localhost/todo-app'</span>
</code></pre>
<p>Note that since they’re just CoffeeScript, you can reference NPM modules and environment variables from within these config files. This is very useful for interfacing with services like Heroku, where variables like <code>MONGO_URI</code> might be set on <code>process.env</code> and subject to change.</p>
<h1 id="configuring-individual-plugins">Configuring individual plugins</h1>
<p>Both types of plugins - sources and services - can be configured by editing their config files, which should be located at <code>config/PLUGIN_NAME.coffee</code>. A plugin’s supported config variables should be listed in its README. As an example, here is <code>cruft.coffee</code>, which is the config file for <a href="http://github.com/isibner/sentry-service-cruft">sentry-service-cruft</a>.</p>
<pre><code class="lang-coffeescript"><span class="hljs-built_in">module</span>.exports = {
  <span class="hljs-attribute">cruftTypes</span>: [
    {
      <span class="hljs-attribute">name</span>: <span class="hljs-string">'Todo Comments'</span>
      <span class="hljs-attribute">regex</span>: <span class="hljs-regexp">/^[\+|\-]?[\s]*[\W]*[\s]*TODO[\W|\s]+(?=\w+)/i</span>
    },
    {
      <span class="hljs-attribute">name</span>: <span class="hljs-string">'Ignored Tests'</span>
      <span class="hljs-attribute">regex</span>: <span class="hljs-regexp">/^[\s]*@Ignore(\s+|$)/i</span>
    }
  ]
}
</code></pre>
<p>As with the server config, you can reference NPM modules and environment variables from within these config files.</p>
<h1 id="configuring-repositories">Configuring repositories</h1>
<p>You can also configure each active repository from within the app. Here, you can limit the files that each service will process, and override service configurations with repo-specific settings. An example configuration is shown below. Only files in <code>src</code> will be processed by services, and the Cruft Tracker service will further ignore anything in <code>bower_components</code>. The <code>cruftTypes</code> property from the cruft tracker’s configuration has also been overridden.</p>
<pre><code class="lang-json">{
    "<span class="hljs-attribute">includeFiles</span>": <span class="hljs-value"><span class="hljs-string">"src/**/*"</span></span>,
    "<span class="hljs-attribute">cruft</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">excludeFiles</span>": <span class="hljs-value"><span class="hljs-string">"**/bower_components/**/*"</span></span>,
        "<span class="hljs-attribute">cruftTypes</span>": <span class="hljs-value">[
            {
                "<span class="hljs-attribute">name</span>": <span class="hljs-value"><span class="hljs-string">"HACKHACK comments"</span></span>,
                "<span class="hljs-attribute">regex</span>": <span class="hljs-value"><span class="hljs-string">"^[\\+|\\-]?[\\s]*[\\W]*[\\s]*HACKHACK"</span>
            </span>}
        ]
    </span>}
</span>}
</code></pre>

    </div>
  </div><!-- /row -->
</div>

  </div>
  
  <script src="/sentry/js/jquery.min.js"></script>
  <script src="/sentry/js/bootstrap.min.js"></script>
  

</body>
</html>
